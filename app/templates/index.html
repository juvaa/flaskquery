{% import "bootstrap/wtf.html" as wtf %}

{% extends "headers.html" %}

{% block content %}
    <div class="container">
        <div class="page-header">
            <h1>Humanöörisitsit 2020</h1>
        </div>
        <p>
            OTiT, Communica ja Prosessikilta järjestävät Humanöörisitsit.
        </p>
        <p>
            Maksu Communica ry:n tilille: FI52 5741 3620 5641 27
        </p>
        <p>
            Viestikenttään "Humanöörisitsit + oma nimi(+ avecin nimi)".
        </p>
        <p>
        Ilmoittautuminen auki 31.1.-1.2.
        </p>
        {% if (starttime < nowtime < endtime) and ((otitcount + prosecount + communicacount) < maxlimit) %}
            <h2>Ilmoittautuminen</h2>
            <form class="form form-horizontal" method="post" role="form">

                {{ form.hidden_tag() }}
                {{ wtf.form_field(form.name) }}
                {{ wtf.form_field(form.mail) }}

                <label class="extra-label">Kilta</label>
                {{ wtf.form_field(form.guild) }}
                {% for e in form.guild.errors %}
                    <p class="text-danger">Valitse kilta</p>
                {% endfor %}

                <label class="extra-label">Juomatoive</label>
                {{ wtf.form_field(form.alcohol) }}
                {% for e in form.alcohol.errors %}
                    <p class="text-danger">Valitse juoma</p>
                {% endfor %}

                <div id="drinks" class="inset hide_">
                    <label class="extra-label">Viini</label>
                    {{ wtf.form_field(form.wine) }}

                    <label class="extra-label">Mieto</label>
                    {{ wtf.form_field(form.beer) }}
                </div>
                {{ wtf.form_field(form.specialneeds) }}


                {{ wtf.form_field(form.avec) }}

                {{ wtf.form_field(form.consent) }}

                <div id="avec-info" class="inset hide_">
                    {{ wtf.form_field(form.avec_name) }}

                    <label class="extra-label">Juomatoive</label>
                    {{ wtf.form_field(form.avec_alcohol) }}
                    <div id="avec-drinks" class="inset hide_">
                        <label class="extra-label">Viini</label>
                        {{ wtf.form_field(form.avec_wine) }}
                        <label class="extra-label">Mieto</label>
                        {{ wtf.form_field(form.avec_beer) }}
                    </div>

                    {{ wtf.form_field(form.avec_specialneeds) }}
                    {{ wtf.form_field(form.avec_consent) }}
                </div>
                {{ wtf.form_field(form.other) }}

                {% for e in form.errors.items() %}
                    <p class="text-danger">{{ e }}</p>
                {% endfor %}

                {{ wtf.form_field(form.submit) }}
            </form>
        {% elif nowtime < starttime %}
            <p>Ilmoittautuminen alkaa {{ starttime }}</p></p>>
        {% else %}
            <h2>Ilmoittautuminen on päättynyt</h2>
        {% endif %}
        <h2>Osallistujat</h2>
        <div class="row">
            <div class="col-sm-6">
                <h3>OTiT: {{ otitcount }}/{{ otitlimit }}</h3>
                {% for entry in otits %}
                    <p>{{ loop.index }}. {{ entry["name"][:30] }}
                        {% if loop.index > otitlimit %}
                            (Varasijalla)
                        {% endif %}
                    </p>
                {% endfor %}
            </div>
            <div class="col-sm-6">
                <h3>Communica: {{ communicacount }}/{{ communicalimit }}</h3>
                {% for entry in communicas %}
                    <p>{{ loop.index }}. {{ entry["name"][:30] }}
                        {% if loop.index > communicalimit %}
                            (Varasijalla)
                        {% endif %}
                    </p>
                {% endfor %}
            </div>
            <div class="col-sm-6">
                <h3>Prose: {{ prosecount }}/{{ proselimit }}</h3>
                {% for entry in proses %}
                    <p>{{ loop.index }}. {{ entry["name"][:30] }}
                        {% if loop.index > communicalimit %}
                            (Varasijalla)
                        {% endif %}
                    </p>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}
